<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èƒ–ä¸œæ¥ä¸­å¤®å¨æˆ¿ - ç³•ç‚¹è½¦é—´ç”Ÿäº§æ‰§è¡Œçœ‹æ¿</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }
      
        body {
            background-color: #0a1a2d;
            color: #e0e0e0;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
        }
        
        body.fullscreen {
            padding: 10px;
            overflow: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            transition: all 0.3s ease;
        }
        
        body.fullscreen .container {
            max-width: 100%;
            height: calc(100vh - 20px);
            display: flex;
            flex-direction: column;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #2a4a6d;
            transition: all 0.3s ease;
        }
        
        body.fullscreen .header {
            margin-bottom: 15px;
            padding-bottom: 10px;
        }
        
        .header h1 {
            color: #4fc3f7;
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        body.fullscreen .header h1 {
            font-size: 32px;
        }
        
        .header .subtitle {
            color: #81d4fa;
            font-size: 16px;
        }
        
        .current-time {
            background-color: #1a3a5d;
            padding: 8px 15px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 10px;
            font-weight: bold;
        }
        
        /* æ¦‚è§ˆå¡ç‰‡æ ·å¼ */
        .overview-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }
        
        body.fullscreen .overview-cards {
            margin-bottom: 15px;
        }
        
        .card {
            background-color: #152642;
            border-radius: 8px;
            padding: 18px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            border-left: 4px solid #4fc3f7;
        }
        
        .card-title {
            font-size: 14px;
            color: #81d4fa;
            margin-bottom: 10px;
        }
        
        .card-value {
            font-size: 32px;
            font-weight: bold;
        }
        
        .card.completed { border-left-color: #4caf50; }
        .card.in-progress { border-left-color: #ff9800; }
        .card.not-started { border-left-color: #9e9e9e; }
        .card.oee { border-left-color: #9c27b0; }
        
        /* ç¯å¢ƒç›‘æ§å¡ç‰‡ - å­—ä½“å¢å¤§ä¼˜åŒ– */
        .environment-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .env-card {
            background-color: #152642;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border-top: 4px solid #4caf50;
        }
        
        .env-card.temperature {
            border-top-color: #ff5722;
        }
        
        .env-card.humidity {
            border-top-color: #2196f3;
        }
        
        .env-card.pressure {
            border-top-color: #9c27b0;
        }
        
        .env-card.energy {
            border-top-color: #ff9800;
        }
        
        /* å¢å¤§äº†ç¯å¢ƒç›‘æ§å¡ç‰‡æ ‡é¢˜å­—ä½“ */
        .env-card-title {
            font-size: 16px; /* ä»13pxå¢å¤§åˆ°16px */
            color: #81d4fa;
            margin-bottom: 12px;
            font-weight: bold;
        }
        
        /* å¢å¤§äº†ç¯å¢ƒç›‘æ§å¡ç‰‡æ•°å€¼å­—ä½“ */
        .env-card-value {
            font-size: 32px; /* ä»24pxå¢å¤§åˆ°32px */
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .env-card-unit {
            font-size: 14px; /* ä»12pxå¢å¤§åˆ°14px */
            color: #9e9e9e;
            margin-bottom: 8px;
        }
        
        /* æ–°å¢ï¼šå•ä½è§£é‡Š */
        .unit-explanation {
            font-size: 11px;
            color: #78909c;
            margin-top: 5px;
            font-style: italic;
        }
        
        /* ä¸»çœ‹æ¿åŒºåŸŸ */
        .main-dashboard {
            background-color: #152642;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }
        
        body.fullscreen .main-dashboard {
            flex: 1;
            overflow: auto;
            margin-bottom: 15px;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #2a4a6d;
        }
        
        .dashboard-header h2 {
            color: #4fc3f7;
        }
        
        .filter-controls select {
            background-color: #1a3a5d;
            color: white;
            border: 1px solid #2a4a6d;
            padding: 8px 15px;
            border-radius: 4px;
            margin-left: 10px;
        }
        
        /* è¡¨æ ¼æ ·å¼ */
        .production-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        body.fullscreen .production-table {
            font-size: 14px;
        }
        
        .production-table th {
            background-color: #1a3a5d;
            color: #81d4fa;
            padding: 14px 12px;
            text-align: left;
            font-weight: bold;
            border-bottom: 2px solid #2a4a6d;
        }
        
        body.fullscreen .production-table th {
            padding: 10px 8px;
            font-size: 13px;
        }
        
        .production-table td {
            padding: 15px 12px;
            border-bottom: 1px solid #2a4a6d;
        }
        
        body.fullscreen .production-table td {
            padding: 10px 8px;
        }
        
        .production-table tr:hover {
            background-color: #1e3a5a;
        }
        
        /* çŠ¶æ€æ ‡ç­¾ */
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status-running { background-color: #2e7d32; color: white; }
        .status-waiting { background-color: #f57c00; color: white; }
        .status-stopped { background-color: #c62828; color: white; }
        
        /* è¿›åº¦æ¡ */
        .progress-container {
            width: 100%;
            height: 20px;
            background-color: #1a3a6d;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                -45deg, 
                rgba(255, 255, 255, 0.2) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255, 255, 255, 0.2) 50%, 
                rgba(255, 255, 255, 0.2) 75%, 
                transparent 75%, 
                transparent
            );
            z-index: 1;
            background-size: 50px 50px;
            animation: move 2s linear infinite;
            border-radius: 10px;
        }
        
        @keyframes move {
            0% {
                background-position: 0 0;
            }
            100% {
                background-position: 50px 50px;
            }
        }
        
        .progress-low { background-color: #f44336; }
        .progress-medium { background-color: #ff9800; }
        .progress-high { background-color: #4caf50; }
        
        /* æ•ˆç‡æŒ‡ç¤ºå™¨ */
        .efficiency-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .efficiency-value {
            font-weight: bold;
        }
        
        .efficiency-low { color: #f44336; }
        .efficiency-medium { color: #ff9800; }
        .efficiency-high { color: #4caf50; }
        
        /* è®¾å¤‡çŠ¶æ€åŒº */
        .equipment-section {
            background-color: #152642;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }
        
        body.fullscreen .equipment-section {
            margin-bottom: 15px;
        }
        
        .equipment-section h2 {
            color: #4fc3f7;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #2a4a6d;
        }
        
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 15px;
        }
        
        .equipment-item {
            background-color: #1a3a5d;
            border-radius: 8px;
            padding: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 4px solid #4caf50;
        }
        
        .equipment-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .equipment-item.waiting {
            border-left-color: #ff9800;
        }
        
        .equipment-item.stopped {
            border-left-color: #f44336;
        }
        
        .equipment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .equipment-name {
            font-size: 15px;
            color: #81d4fa;
            font-weight: bold;
        }
        
        .equipment-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: bold;
        }
        
        .equipment-status.running { background-color: #2e7d32; color: white; }
        .equipment-status.waiting { background-color: #f57c00; color: white; }
        .equipment-status.stopped { background-color: #c62828; color: white; }
        
        .equipment-details {
            margin-top: 10px;
        }
        
        .equipment-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .detail-label {
            color: #b0bec5;
        }
        
        .detail-value {
            font-weight: bold;
            color: #fff;
        }
        
        .detail-value.normal { color: #4caf50; }
        .detail-value.warning { color: #ff9800; }
        .detail-value.danger { color: #f44336; }
        
        /* äº§å“å¡ç‰‡æ ·å¼ */
        .product-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        body.fullscreen .product-cards {
            margin-bottom: 15px;
        }
        
        .product-card {
            background-color: #152642;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            border-top: 4px solid;
        }
        
        .product-card h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .product-card .product-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .product-detail-item {
            font-size: 14px;
        }
        
        .product-detail-label {
            color: #81d4fa;
            font-size: 13px;
        }
        
        .product-detail-value {
            font-weight: bold;
            color: #fff;
        }
        
        /* æ§åˆ¶æŒ‰é’®åŒºåŸŸ */
        .control-panel {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        body.fullscreen .control-panel {
            margin-top: 10px;
        }
        
        .control-btn {
            background-color: #1976d2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s;
        }
        
        .control-btn:hover {
            background-color: #1565c0;
        }
        
        .reset-btn {
            background-color: #d32f2f;
        }
        
        .reset-btn:hover {
            background-color: #b71c1c;
        }
        
        .fullscreen-btn {
            background-color: #388e3c;
        }
        
        .fullscreen-btn:hover {
            background-color: #2e7d32;
        }
        
        .fullscreen-btn.active {
            background-color: #f57c00;
        }
        
        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: #1a3a5d;
            padding: 8px 15px;
            border-radius: 4px;
        }
        
        .speed-control select {
            background-color: #152642;
            color: white;
            border: 1px solid #2a4a6d;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 1200px) {
            .production-table {
                display: block;
                overflow-x: auto;
            }
        }
        
        @media (max-width: 768px) {
            .overview-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .environment-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .equipment-grid {
                grid-template-columns: repeat(1, 1fr);
            }
            
            .product-cards {
                grid-template-columns: 1fr;
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .filter-controls {
                margin-top: 10px;
            }
            
            .filter-controls select {
                margin-left: 0;
                margin-right: 10px;
                margin-bottom: 5px;
            }
            
            .control-panel {
                flex-direction: column;
            }
            
            /* ç§»åŠ¨ç«¯ç¯å¢ƒå¡ç‰‡å­—ä½“å¾®è°ƒ */
            .env-card-title {
                font-size: 15px;
            }
            
            .env-card-value {
                font-size: 28px;
            }
        }
        
        /* å…¨å±æ¨¡å¼ä¸‹çš„ç‰¹æ®Šè°ƒæ•´ */
        @media (min-width: 1600px) and (min-height: 900px) {
            body.fullscreen .overview-cards {
                grid-template-columns: repeat(4, 1fr);
            }
            
            body.fullscreen .environment-cards {
                grid-template-columns: repeat(4, 1fr);
            }
            
            body.fullscreen .product-cards {
                grid-template-columns: repeat(3, 1fr);
            }
            
            body.fullscreen .equipment-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        /* å®ŒæˆåŠ¨ç”» */
        @keyframes completedAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .completed-flash {
            animation: completedAnimation 0.5s ease 3;
        }
        
        /* å…¨å±æç¤º */
        .fullscreen-hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
            display: none;
        }
        
        body.fullscreen .fullscreen-hint {
            display: block;
        }
        
        /* æ¸©åº¦è®¡æ ·å¼ */
        .temp-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .temp-icon {
            color: #ff5722;
            font-size: 14px;
        }
        
        /* æ¹¿åº¦æ ·å¼ */
        .humidity-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .humidity-icon {
            color: #2196f3;
            font-size: 14px;
        }
        
        /* èƒ½è€—æ ·å¼ */
        .energy-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .energy-icon {
            color: #ff9800;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>èƒ–ä¸œæ¥ä¸­å¤®å¨æˆ¿ - ç³•ç‚¹è½¦é—´ç”Ÿäº§æ‰§è¡Œçœ‹æ¿</h1>
            <div class="subtitle">MESå®æ—¶ç›‘æ§ç³»ç»Ÿ | æ•°æ®æ¯10ç§’è‡ªåŠ¨æ›´æ–°</div>
            <div class="current-time" id="currentTime">æ­£åœ¨åŠ è½½æ—¶é—´...</div>
        </div>
        
        <!-- æ¦‚è§ˆå¡ç‰‡ -->
        <div class="overview-cards">
            <div class="card completed">
                <div class="card-title">ä»Šæ—¥å·²å®Œæˆå·¥å•</div>
                <div class="card-value" id="completedOrders">6</div>
            </div>
            <div class="card in-progress">
                <div class="card-title">ç”Ÿäº§è¿›è¡Œä¸­</div>
                <div class="card-value" id="inProgressOrders">4</div>
            </div>
            <div class="card not-started">
                <div class="card-title">å¾…å¼€å§‹å·¥å•</div>
                <div class="card-value" id="pendingOrders">2</div>
            </div>
            <div class="card oee">
                <div class="card-title">å®æ—¶OEEï¼ˆè®¾å¤‡ç»¼åˆæ•ˆç‡ï¼‰</div>
                <div class="card-value" id="oeeValue">88.2%</div>
            </div>
        </div>
        
        <!-- ç¯å¢ƒç›‘æ§å¡ç‰‡ - å­—ä½“å·²å¢å¤§ -->
        <div class="environment-cards">
            <div class="env-card temperature">
                <div class="env-card-title">è½¦é—´æ¸©åº¦</div>
                <div class="env-card-value" id="workshopTemp">24.5</div>
                <div class="env-card-unit">Â°C</div>
                <div class="temp-indicator">
                    <span class="temp-icon">ğŸŒ¡ï¸</span>
                    <span style="font-size: 12px;">æ­£å¸¸èŒƒå›´: 22-26Â°C</span>
                </div>
            </div>
            
            <div class="env-card humidity">
                <div class="env-card-title">è½¦é—´æ¹¿åº¦</div>
                <div class="env-card-value" id="workshopHumidity">58</div>
                <div class="env-card-unit">%RH</div>
                <div class="unit-explanation">ç›¸å¯¹æ¹¿åº¦(Relative Humidity)</div>
                <div class="humidity-indicator">
                    <span class="humidity-icon">ğŸ’§</span>
                    <span style="font-size: 12px;">æ­£å¸¸èŒƒå›´: 55-65%RH</span>
                </div>
            </div>
            
            <div class="env-card">
                <div class="env-card-title">ç©ºæ°”è´¨é‡</div>
                <div class="env-card-value" id="airQuality">ä¼˜</div>
                <div class="env-card-unit">PM2.5: 12Î¼g/mÂ³</div>
                <div style="font-size: 12px; color: #4caf50; margin-top: 5px;">ç¬¦åˆé£Ÿå“ç”Ÿäº§æ ‡å‡†</div>
            </div>
            
            <div class="env-card energy">
                <div class="env-card-title">è½¦é—´èƒ½è€—</div>
                <div class="env-card-value" id="energyConsumption">86.5</div>
                <div class="env-card-unit">kWÂ·h</div>
                <div class="energy-indicator">
                    <span class="energy-icon">âš¡</span>
                    <span style="font-size: 12px;">ä»Šæ—¥ç´¯è®¡: 1250 kWÂ·h</span>
                </div>
            </div>
        </div>
        
        <!-- äº§å“ç”Ÿäº§æ•°æ® -->
        <div class="product-cards">
            <div class="product-card" style="border-top-color: #4fc3f7;">
                <h3>ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰</h3>
                <div class="progress-container">
                    <div class="progress-bar progress-high" id="product1Progress" style="width: 85%"></div>
                </div>
                <div class="product-details">
                    <div class="product-detail-item">
                        <div class="product-detail-label">ä»Šæ—¥è®¡åˆ’</div>
                        <div class="product-detail-value">10,000 ç›’</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">å·²å®Œæˆ</div>
                        <div class="product-detail-value" id="product1Completed">8,500 ç›’</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">åˆæ ¼ç‡</div>
                        <div class="product-detail-value">99.2%</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">ä¸‹ä¸ªè®¢å•</div>
                        <div class="product-detail-value" id="product1NextOrder">GD20241123001</div>
                    </div>
                </div>
            </div>
            
            <div class="product-card" style="border-top-color: #ff9800;">
                <h3>èŠ‹æ³¥éº»è–¯é…¥</h3>
                <div class="progress-container">
                    <div class="progress-bar progress-medium" id="product2Progress" style="width: 65%"></div>
                </div>
                <div class="product-details">
                    <div class="product-detail-item">
                        <div class="product-detail-label">ä»Šæ—¥è®¡åˆ’</div>
                        <div class="product-detail-value">8,000 ä¸ª</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">å·²å®Œæˆ</div>
                        <div class="product-detail-value" id="product2Completed">5,200 ä¸ª</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">åˆæ ¼ç‡</div>
                        <div class="product-detail-value">98.7%</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">ä¸‹ä¸ªè®¢å•</div>
                        <div class="product-detail-value" id="product2NextOrder">GD20241123005</div>
                    </div>
                </div>
            </div>
            
            <div class="product-card" style="border-top-color: #9c27b0;">
                <h3>è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰</h3>
                <div class="progress-container">
                    <div class="progress-bar progress-low" id="product3Progress" style="width: 40%"></div>
                </div>
                <div class="product-details">
                    <div class="product-detail-item">
                        <div class="product-detail-label">ä»Šæ—¥è®¡åˆ’</div>
                        <div class="product-detail-value">6,000 ç›’</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">å·²å®Œæˆ</div>
                        <div class="product-detail-value" id="product3Completed">2,400 ç›’</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">åˆæ ¼ç‡</div>
                        <div class="product-detail-value">99.5%</div>
                    </div>
                    <div class="product-detail-item">
                        <div class="product-detail-label">ä¸‹ä¸ªè®¢å•</div>
                        <div class="product-detail-value" id="product3NextOrder">GD20241123009</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä¸»ç”Ÿäº§çœ‹æ¿ -->
        <div class="main-dashboard">
            <div class="dashboard-header">
                <h2>ç”Ÿäº§å·¥å•æ‰§è¡Œè¯¦æƒ…</h2>
                <div class="filter-controls">
                    <select id="productFilter">
                        <option value="all">å…¨éƒ¨äº§å“</option>
                        <option value="product1">ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰</option>
                        <option value="product2">èŠ‹æ³¥éº»è–¯é…¥</option>
                        <option value="product3">è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰</option>
                    </select>
                    <select id="lineFilter">
                        <option value="all">å…¨éƒ¨äº§çº¿</option>
                        <option value="line1">ç³•ç‚¹ä¸€çº¿</option>
                        <option value="line2">ç³•ç‚¹äºŒçº¿</option>
                        <option value="line3">ç³•ç‚¹ä¸‰çº¿</option>
                        <option value="line4">ç³•ç‚¹å››çº¿</option>
                        <option value="line5">ç³•ç‚¹äº”çº¿</option>
                    </select>
                </div>
            </div>
            
            <table class="production-table">
                <thead>
                    <tr>
                        <th>äº§çº¿/ç­ç»„</th>
                        <th>è®¢å•å·</th>
                        <th>äº§å“åç§°</th>
                        <th>è®¡åˆ’æ€»é‡</th>
                        <th>å·²ç”Ÿäº§é‡</th>
                        <th>å®Œæˆç‡</th>
                        <th>å½“å‰çŠ¶æ€</th>
                        <th>å°æ—¶äº§èƒ½</th>
                        <th>ä¸‹ä¸ªè®¢å•</th>
                    </tr>
                </thead>
                <tbody id="productionTableBody">
                    <!-- æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                </tbody>
            </table>
        </div>
        
        <!-- è®¾å¤‡çŠ¶æ€åŒº -->
        <div class="equipment-section">
            <div class="dashboard-header">
                <h2>è®¾å¤‡çŠ¶æ€åŠå‚æ•°ç›‘æ§</h2>
                <div class="filter-controls">
                    <select id="equipmentFilter">
                        <option value="all">å…¨éƒ¨è®¾å¤‡</option>
                        <option value="mixing">å’Œé¢è®¾å¤‡</option>
                        <option value="forming">æˆå‹è®¾å¤‡</option>
                        <option value="baking">çƒ˜çƒ¤è®¾å¤‡</option>
                        <option value="cooling">å†·å´è®¾å¤‡</option>
                        <option value="packaging">åŒ…è£…è®¾å¤‡</option>
                    </select>
                </div>
            </div>
            
            <div class="equipment-grid" id="equipmentGrid">
                <!-- è®¾å¤‡çŠ¶æ€å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
            </div>
        </div>
        
        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="control-panel">
            <button class="control-btn" onclick="refreshData()">
                <span>ğŸ”„</span> æ‰‹åŠ¨åˆ·æ–°æ•°æ®
            </button>
            
            <button class="control-btn reset-btn" onclick="resetProductionData()">
                <span>ğŸ”„</span> é‡ç½®ç”Ÿäº§æ•°æ®
            </button>
            
            <button class="control-btn fullscreen-btn" id="fullscreenBtn" onclick="toggleFullscreen()">
                <span>â›¶</span> å…¨å±æ˜¾ç¤º
            </button>
            
            <button class="control-btn" onclick="toggleProductionSpeed()" id="speedToggleBtn">
                <span>âš¡</span> åˆ‡æ¢ç”Ÿäº§é€Ÿåº¦
            </button>
            
            <div class="speed-control">
                <label for="updateSpeed">æ›´æ–°é¢‘ç‡:</label>
                <select id="updateSpeed" onchange="changeUpdateSpeed()">
                    <option value="10000">10ç§’</option>
                    <option value="5000">5ç§’</option>
                    <option value="2000">2ç§’</option>
                    <option value="1000">1ç§’</option>
                    <option value="500">0.5ç§’</option>
                </select>
            </div>
            
            <div class="speed-control">
                <label for="productionRate">ç”Ÿäº§é€Ÿç‡:</label>
                <select id="productionRate" onchange="changeProductionRate()">
                    <option value="1">æ­£å¸¸</option>
                    <option value="2">å¿«é€Ÿ</option>
                    <option value="5">æé€Ÿ</option>
                    <option value="0.5">æ…¢é€Ÿ</option>
                </select>
            </div>
        </div>
    </div>
    
    <!-- å…¨å±æç¤º -->
    <div class="fullscreen-hint" id="fullscreenHint">
        æŒ‰ ESC é”®é€€å‡ºå…¨å±æ¨¡å¼
    </div>

    <script>
        // ä¸‰ç§äº§å“æ•°æ®
        const products = {
            product1: {
                name: "ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                unit: "ç›’",
                nextOrderBase: "GD20241123001"
            },
            product2: {
                name: "èŠ‹æ³¥éº»è–¯é…¥",
                unit: "ä¸ª",
                nextOrderBase: "GD20241123005"
            },
            product3: {
                name: "è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                unit: "ç›’",
                nextOrderBase: "GD20241123009"
            }
        };
        
        // åˆå§‹ç”Ÿäº§æ•°æ®
        let productionData = [
            {
                line: "ç³•ç‚¹ä¸€çº¿-ç”²ç­",
                orderNo: "GD20241122001",
                product: "ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                planQty: 5000,
                producedQty: 4250,
                status: "running",
                hourlyOutput: 650,
                nextOrder: "GD20241123001 ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                lineCode: "line1",
                productCode: "product1"
            },
            {
                line: "ç³•ç‚¹ä¸€çº¿-ä¹™ç­",
                orderNo: "GD20241122002",
                product: "ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                planQty: 5000,
                producedQty: 4250,
                status: "running",
                hourlyOutput: 600,
                nextOrder: "GD20241123002 èŠ‹æ³¥éº»è–¯é…¥",
                lineCode: "line1",
                productCode: "product1"
            },
            {
                line: "ç³•ç‚¹äºŒçº¿-ç”²ç­",
                orderNo: "GD20241122003",
                product: "ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                planQty: 6000,
                producedQty: 6000,
                status: "waiting",
                hourlyOutput: 0,
                nextOrder: "GD20241123003 èŠ‹æ³¥éº»è–¯é…¥",
                lineCode: "line2",
                productCode: "product1"
            },
            {
                line: "ç³•ç‚¹äºŒçº¿-ä¹™ç­",
                orderNo: "GD20241122004",
                product: "èŠ‹æ³¥éº»è–¯é…¥",
                planQty: 4000,
                producedQty: 4000,
                status: "waiting",
                hourlyOutput: 0,
                nextOrder: "GD20241123004 è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                lineCode: "line2",
                productCode: "product2"
            },
            {
                line: "ç³•ç‚¹ä¸‰çº¿-ç”²ç­",
                orderNo: "GD20241122005",
                product: "èŠ‹æ³¥éº»è–¯é…¥",
                planQty: 4000,
                producedQty: 1200,
                status: "running",
                hourlyOutput: 500,
                nextOrder: "GD20241123005 ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                lineCode: "line3",
                productCode: "product2"
            },
            {
                line: "ç³•ç‚¹ä¸‰çº¿-ä¹™ç­",
                orderNo: "GD20241122006",
                product: "èŠ‹æ³¥éº»è–¯é…¥",
                planQty: 4000,
                producedQty: 0,
                status: "stopped",
                hourlyOutput: 0,
                nextOrder: "GD20241123006 èŠ‹æ³¥éº»è–¯é…¥",
                lineCode: "line3",
                productCode: "product2"
            },
            {
                line: "ç³•ç‚¹å››çº¿-ç”²ç­",
                orderNo: "GD20241122007",
                product: "èŠ‹æ³¥éº»è–¯é…¥",
                planQty: 4000,
                producedQty: 4000,
                status: "waiting",
                hourlyOutput: 0,
                nextOrder: "GD20241123007 ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                lineCode: "line4",
                productCode: "product2"
            },
            {
                line: "ç³•ç‚¹å››çº¿-ä¹™ç­",
                orderNo: "GD20241122008",
                product: "è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                planQty: 3000,
                producedQty: 2400,
                status: "running",
                hourlyOutput: 400,
                nextOrder: "GD20241123008 èŠ‹æ³¥éº»è–¯é…¥",
                lineCode: "line4",
                productCode: "product3"
            },
            {
                line: "ç³•ç‚¹äº”çº¿-ç”²ç­",
                orderNo: "GD20241122009",
                product: "è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                planQty: 3000,
                producedQty: 0,
                status: "stopped",
                hourlyOutput: 0,
                nextOrder: "GD20241123009 è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                lineCode: "line5",
                productCode: "product3"
            },
            {
                line: "ç³•ç‚¹äº”çº¿-ä¹™ç­",
                orderNo: "GD20241122010",
                product: "è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                planQty: 3000,
                producedQty: 0,
                status: "stopped",
                hourlyOutput: 0,
                nextOrder: "GD20241123010 ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                lineCode: "line5",
                productCode: "product3"
            }
        ];
        
        // è®¾å¤‡æ•°æ®æ¨¡æ‹Ÿ - å¢åŠ è¯¦ç»†å‚æ•°
        const equipmentData = [
            { 
                name: "å’Œé¢æœºA", 
                status: "running", 
                line: "line1",
                type: "mixing",
                temperature: 25.5,
                humidity: 62,
                speed: 120,
                power: 5.2,
                runtime: 8.5,
                temperatureStatus: "normal" // normal, warning, danger
            },
            { 
                name: "å’Œé¢æœºB", 
                status: "waiting", 
                line: "line2",
                type: "mixing",
                temperature: 22.3,
                humidity: 58,
                speed: 0,
                power: 0.5,
                runtime: 6.2,
                temperatureStatus: "normal"
            },
            { 
                name: "æˆå‹æœºA", 
                status: "running", 
                line: "line1",
                type: "forming",
                temperature: 28.7,
                humidity: 55,
                speed: 85,
                power: 3.8,
                runtime: 7.8,
                temperatureStatus: "warning"
            },
            { 
                name: "æˆå‹æœºB", 
                status: "running", 
                line: "line2",
                type: "forming",
                temperature: 27.2,
                humidity: 57,
                speed: 92,
                power: 4.1,
                runtime: 8.1,
                temperatureStatus: "normal"
            },
            { 
                name: "é…¥çš®æœº", 
                status: "running", 
                line: "line3",
                type: "forming",
                temperature: 26.8,
                humidity: 59,
                speed: 78,
                power: 3.5,
                runtime: 7.5,
                temperatureStatus: "normal"
            },
            { 
                name: "ç”µçƒ¤ç®±1", 
                status: "running", 
                line: "line1",
                type: "baking",
                temperature: 185.5,
                humidity: 15,
                speed: 45,
                power: 12.5,
                runtime: 9.2,
                temperatureStatus: "normal"
            },
            { 
                name: "ç”µçƒ¤ç®±2", 
                status: "stopped", 
                line: "line3",
                type: "baking",
                temperature: 65.2,
                humidity: 42,
                speed: 0,
                power: 1.2,
                runtime: 5.8,
                temperatureStatus: "normal"
            },
            { 
                name: "ç”µçƒ¤ç®±3", 
                status: "running", 
                line: "line2",
                type: "baking",
                temperature: 192.3,
                humidity: 18,
                speed: 42,
                power: 11.8,
                runtime: 8.7,
                temperatureStatus: "warning"
            },
            { 
                name: "ç”µçƒ¤ç®±4", 
                status: "running", 
                line: "line4",
                type: "baking",
                temperature: 178.6,
                humidity: 16,
                speed: 48,
                power: 10.9,
                runtime: 8.9,
                temperatureStatus: "normal"
            },
            { 
                name: "å†·å´çº¿A", 
                status: "running", 
                line: "line1",
                type: "cooling",
                temperature: 18.2,
                humidity: 48,
                speed: 30,
                power: 2.5,
                runtime: 8.3,
                temperatureStatus: "normal"
            },
            { 
                name: "å†·å´çº¿B", 
                status: "waiting", 
                line: "line2",
                type: "cooling",
                temperature: 21.5,
                humidity: 52,
                speed: 0,
                power: 0.8,
                runtime: 6.5,
                temperatureStatus: "normal"
            },
            { 
                name: "åŒ…è£…æœºA", 
                status: "running", 
                line: "line1",
                type: "packaging",
                temperature: 26.3,
                humidity: 54,
                speed: 120,
                power: 4.5,
                runtime: 8.6,
                temperatureStatus: "normal"
            },
            { 
                name: "åŒ…è£…æœºB", 
                status: "running", 
                line: "line2",
                type: "packaging",
                temperature: 27.1,
                humidity: 56,
                speed: 115,
                power: 4.2,
                runtime: 8.4,
                temperatureStatus: "normal"
            },
            { 
                name: "åŒ…è£…æœºC", 
                status: "waiting", 
                line: "line3",
                type: "packaging",
                temperature: 24.8,
                humidity: 58,
                speed: 0,
                power: 0.7,
                runtime: 7.1,
                temperatureStatus: "normal"
            },
            { 
                name: "åŒ…è£…æœºD", 
                status: "running", 
                line: "line4",
                type: "packaging",
                temperature: 26.7,
                humidity: 55,
                speed: 105,
                power: 4.0,
                runtime: 8.2,
                temperatureStatus: "normal"
            },
            { 
                name: "åŒ…è£…æœºE", 
                status: "stopped", 
                line: "line5",
                type: "packaging",
                temperature: 23.4,
                humidity: 60,
                speed: 0,
                power: 0.6,
                runtime: 4.8,
                temperatureStatus: "normal"
            }
        ];
        
        // ç¯å¢ƒæ•°æ®
        let environmentData = {
            workshopTemp: 24.5,
            workshopHumidity: 58,
            airQuality: "ä¼˜",
            pm25: 12,
            energyConsumption: 86.5,
            totalEnergyToday: 1250
        };
        
        // å…¨å±€å˜é‡
        let refreshInterval;
        let updateSpeed = 10000; // é»˜è®¤10ç§’æ›´æ–°ä¸€æ¬¡
        let productionRate = 1; // ç”Ÿäº§é€Ÿç‡å› å­
        let isFastMode = false;
        let productionCompleted = false; // æ ‡è®°æ˜¯å¦æ‰€æœ‰ç”Ÿäº§å·²å®Œæˆ
        let isFullscreen = false; // æ ‡è®°æ˜¯å¦å…¨å±
        
        // æ ¼å¼åŒ–æ•°å­—å‡½æ•° - ç»Ÿä¸€æ§åˆ¶å°æ•°ç‚¹ä½æ•°
        function formatNumber(value, decimals = 1) {
            return parseFloat(value).toFixed(decimals);
        }
        
        // æ ¼å¼åŒ–ç™¾åˆ†æ¯”å‡½æ•°
        function formatPercent(value, decimals = 1) {
            return parseFloat(value).toFixed(decimals) + "%";
        }
        
        // æ›´æ–°å½“å‰æ—¶é—´
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                weekday: 'long'
            }) + ' ' + now.toLocaleTimeString('zh-CN');
            
            document.getElementById('currentTime').textContent = timeString;
        }
        
        // è®¡ç®—å®Œæˆç‡å¹¶è¿”å›è¿›åº¦æ¡HTML
        function getProgressBar(produced, plan) {
            const percentage = plan > 0 ? Math.min(100, Math.round((produced / plan) * 100)) : 0;
            let progressClass = "progress-high";
            
            if (percentage < 70) progressClass = "progress-low";
            else if (percentage < 95) progressClass = "progress-medium";
            
            return `
                <div class="progress-container">
                    <div class="progress-bar ${progressClass}" style="width: ${percentage}%"></div>
                </div>
                <div style="margin-top: 5px; font-size: 12px;">${percentage}%</div>
            `;
        }
        
        // è·å–çŠ¶æ€æ ‡ç­¾HTML
        function getStatusBadge(status) {
            if (status === "running") return '<span class="status-badge status-running">ç”Ÿäº§è¿›è¡Œä¸­</span>';
            if (status === "waiting") return '<span class="status-badge status-waiting">ç­‰å¾…/è°ƒè¯•</span>';
            return '<span class="status-badge status-stopped">åœæœº</span>';
        }
        
        // è·å–æ•ˆç‡æŒ‡ç¤ºå™¨HTML
        function getEfficiencyIndicator(hourlyOutput, productCode) {
            const unit = products[productCode]?.unit || "ä¸ª";
            let efficiencyClass = "efficiency-high";
            let efficiencyText = "é«˜æ•ˆ";
            
            if (hourlyOutput < 500) {
                efficiencyClass = "efficiency-low";
                efficiencyText = "åä½";
            } else if (hourlyOutput < 600) {
                efficiencyClass = "efficiency-medium";
                efficiencyText = "æ­£å¸¸";
            }
            
            return `
                <div class="efficiency-indicator">
                    <span class="efficiency-value ${efficiencyClass}">${hourlyOutput} ${unit}/å°æ—¶</span>
                    <span style="font-size: 12px; color: #9e9e9e;">${efficiencyText}</span>
                </div>
            `;
        }
        
        // æ¸²æŸ“ç”Ÿäº§è¡¨æ ¼
        function renderProductionTable(productFilter = "all", lineFilter = "all") {
            const tbody = document.getElementById('productionTableBody');
            tbody.innerHTML = "";
            
            // ç»Ÿè®¡æ•°æ®ç”¨äºæ¦‚è§ˆå¡ç‰‡
            let completedCount = 0;
            let inProgressCount = 0;
            let pendingCount = 0;
            
            // ç»Ÿè®¡å„äº§å“å®Œæˆæ•°é‡
            let product1Completed = 0;
            let product2Completed = 0;
            let product3Completed = 0;
            
            // ç”¨äºè·Ÿè¸ªä¸‹ä¸ªè®¢å•ç¼–å·
            let product1NextOrder = parseInt(products.product1.nextOrderBase.slice(-3));
            let product2NextOrder = parseInt(products.product2.nextOrderBase.slice(-3));
            let product3NextOrder = parseInt(products.product3.nextOrderBase.slice(-3));
            
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ç”Ÿäº§éƒ½å·²å®Œæˆ
            let allCompleted = true;
            
            const filteredData = productionData.filter(item => {
                let passProduct = true;
                let passLine = true;
                
                if (productFilter !== "all") {
                    passProduct = item.productCode === productFilter;
                }
                
                if (lineFilter !== "all") {
                    passLine = item.lineCode === lineFilter;
                }
                
                return passProduct && passLine;
            });
            
            filteredData.forEach(item => {
                const isCompleted = item.producedQty >= item.planQty;
                const isPending = item.producedQty === 0 && item.status !== "running";
                
                if (isCompleted) completedCount++;
                else if (isPending) pendingCount++;
                else inProgressCount++;
                
                // å¦‚æœæœ‰ä¸€ä¸ªæœªå®Œæˆï¼Œåˆ™ä¸æ˜¯å…¨éƒ¨å®Œæˆ
                if (!isCompleted) {
                    allCompleted = false;
                }
                
                // ç»Ÿè®¡å„äº§å“å®Œæˆæ•°é‡
                if (item.productCode === "product1") {
                    product1Completed += item.producedQty;
                } else if (item.productCode === "product2") {
                    product2Completed += item.producedQty;
                } else if (item.productCode === "product3") {
                    product3Completed += item.producedQty;
                }
                
                const unit = products[item.productCode]?.unit || "ä¸ª";
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${item.line}</strong></td>
                    <td><code style="color: #81d4fa;">${item.orderNo}</code></td>
                    <td>${item.product}</td>
                    <td><strong>${item.planQty.toLocaleString()} ${unit}</strong></td>
                    <td><strong style="color: #4fc3f7;">${item.producedQty.toLocaleString()} ${unit}</strong></td>
                    <td>${getProgressBar(item.producedQty, item.planQty)}</td>
                    <td>${getStatusBadge(item.status)}</td>
                    <td>${getEfficiencyIndicator(item.hourlyOutput, item.productCode)}</td>
                    <td style="color: #b0bec5;">${item.nextOrder}</td>
                `;
                tbody.appendChild(row);
            });
            
            // æ›´æ–°æ¦‚è§ˆå¡ç‰‡
            document.getElementById('completedOrders').textContent = completedCount;
            document.getElementById('inProgressOrders').textContent = inProgressCount;
            document.getElementById('pendingOrders').textContent = pendingCount;
            
            // æ¨¡æ‹Ÿè®¡ç®—OEE
            const oeeValue = 85 + Math.random() * 6; // æ¨¡æ‹Ÿ85-91%ä¹‹é—´çš„OEE
            document.getElementById('oeeValue').textContent = formatPercent(oeeValue, 1);
            
            // æ›´æ–°äº§å“å®Œæˆæ•°é‡
            document.getElementById('product1Completed').textContent = product1Completed.toLocaleString() + " " + products.product1.unit;
            document.getElementById('product2Completed').textContent = product2Completed.toLocaleString() + " " + products.product2.unit;
            document.getElementById('product3Completed').textContent = product3Completed.toLocaleString() + " " + products.product3.unit;
            
            // æ›´æ–°äº§å“ä¸‹ä¸ªè®¢å•
            document.getElementById('product1NextOrder').textContent = `GD20241123${product1NextOrder.toString().padStart(3, '0')}`;
            document.getElementById('product2NextOrder').textContent = `GD20241123${product2NextOrder.toString().padStart(3, '0')}`;
            document.getElementById('product3NextOrder').textContent = `GD20241123${product3NextOrder.toString().padStart(3, '0')}`;
            
            // æ›´æ–°äº§å“è¿›åº¦æ¡
            const product1Percentage = Math.min(100, Math.round((product1Completed / 10000) * 100));
            const product2Percentage = Math.min(100, Math.round((product2Completed / 8000) * 100));
            const product3Percentage = Math.min(100, Math.round((product3Completed / 6000) * 100));
            
            document.getElementById('product1Progress').style.width = product1Percentage + "%";
            document.getElementById('product2Progress').style.width = product2Percentage + "%";
            document.getElementById('product3Progress').style.width = product3Percentage + "%";
            
            // æ›´æ–°è¿›åº¦æ¡é¢œè‰²
            document.getElementById('product1Progress').className = `progress-bar ${product1Percentage >= 95 ? 'progress-high' : product1Percentage >= 70 ? 'progress-medium' : 'progress-low'}`;
            document.getElementById('product2Progress').className = `progress-bar ${product2Percentage >= 95 ? 'progress-high' : product2Percentage >= 70 ? 'progress-medium' : 'progress-low'}`;
            document.getElementById('product3Progress').className = `progress-bar ${product3Percentage >= 95 ? 'progress-high' : product3Percentage >= 70 ? 'progress-medium' : 'progress-low'}`;
            
            // å¦‚æœæ‰€æœ‰ç”Ÿäº§éƒ½å·²å®Œæˆï¼Œæ˜¾ç¤ºæç¤º
            if (allCompleted && filteredData.length > 0) {
                productionCompleted = true;
                // æ˜¾ç¤ºå®Œæˆæç¤º
                const header = document.querySelector('.header .subtitle');
                const originalText = header.textContent;
                header.innerHTML = 'ğŸ‰ ä»Šæ—¥æ‰€æœ‰ç”Ÿäº§ä»»åŠ¡å·²å®Œæˆï¼ğŸ‰';
                header.style.color = '#4caf50';
                header.style.fontWeight = 'bold';
                
                // 5ç§’åæ¢å¤åŸçŠ¶
                setTimeout(() => {
                    header.textContent = originalText;
                    header.style.color = '#81d4fa';
                    header.style.fontWeight = 'normal';
                }, 5000);
            } else {
                productionCompleted = false;
            }
        }
        
        // æ›´æ–°ç¯å¢ƒæ•°æ®
        function updateEnvironmentData() {
            // éšæœºæ³¢åŠ¨ç¯å¢ƒæ•°æ®
            environmentData.workshopTemp += (Math.random() - 0.5) * 0.3;
            environmentData.workshopTemp = Math.max(22, Math.min(26, environmentData.workshopTemp));
            
            environmentData.workshopHumidity += (Math.random() - 0.5) * 2;
            environmentData.workshopHumidity = Math.max(55, Math.min(65, environmentData.workshopHumidity));
            
            // æ ¹æ®è®¾å¤‡è¿è¡Œæƒ…å†µæ›´æ–°èƒ½è€—
            let activeEquipment = equipmentData.filter(e => e.status === "running").length;
            environmentData.energyConsumption = 80 + (activeEquipment * 0.8) + (Math.random() * 5);
            environmentData.totalEnergyToday += environmentData.energyConsumption * (updateSpeed / 3600000); // æŒ‰æ—¶é—´æ¯”ä¾‹å¢åŠ 
            
            // æ›´æ–°ç©ºæ°”è´¨é‡
            const qualityLevels = ["ä¼˜", "è‰¯", "ä¸­"];
            environmentData.airQuality = qualityLevels[Math.floor(Math.random() * 2)]; // åªå–ä¼˜æˆ–è‰¯
            environmentData.pm25 = Math.floor(Math.random() * 10) + 10;
            
            // æ›´æ–°DOM - ä½¿ç”¨ç»Ÿä¸€çš„æ ¼å¼åŒ–å‡½æ•°
            document.getElementById('workshopTemp').textContent = formatNumber(environmentData.workshopTemp, 1);
            document.getElementById('workshopHumidity').textContent = Math.round(environmentData.workshopHumidity);
            document.getElementById('airQuality').textContent = environmentData.airQuality;
            document.getElementById('airQuality').parentElement.querySelector('.env-card-unit').textContent = `PM2.5: ${environmentData.pm25}Î¼g/mÂ³`;
            document.getElementById('energyConsumption').textContent = formatNumber(environmentData.energyConsumption, 1);
            document.getElementById('energyConsumption').parentElement.querySelector('.energy-indicator span:nth-child(2)').textContent = 
                `ä»Šæ—¥ç´¯è®¡: ${Math.round(environmentData.totalEnergyToday)} kWÂ·h`;
        }
        
        // æ¸²æŸ“è®¾å¤‡çŠ¶æ€
        function renderEquipmentStatus(filter = "all") {
            const equipmentGrid = document.getElementById('equipmentGrid');
            equipmentGrid.innerHTML = "";
            
            const filteredEquipment = filter === "all" 
                ? equipmentData 
                : equipmentData.filter(item => item.type === filter);
            
            filteredEquipment.forEach(equipment => {
                let statusClass = "running";
                let statusText = "è¿è¡Œä¸­";
                
                if (equipment.status === "waiting") {
                    statusClass = "waiting";
                    statusText = "å¾…æœºä¸­";
                } else if (equipment.status === "stopped") {
                    statusClass = "stopped";
                    statusText = "å·²åœæœº";
                }
                
                // ç¡®å®šæ¸©åº¦çŠ¶æ€æ˜¾ç¤ºç±»
                let tempValueClass = "normal";
                if (equipment.temperatureStatus === "warning") {
                    tempValueClass = "warning";
                } else if (equipment.temperatureStatus === "danger") {
                    tempValueClass = "danger";
                }
                
                // æ ¹æ®è®¾å¤‡ç±»å‹ç¡®å®šæ¸©åº¦å•ä½å’Œæ˜¾ç¤ºç²¾åº¦
                const tempUnit = equipment.type === "baking" ? "Â°C" : "Â°C";
                // ä¿®æ”¹å°æ•°ç‚¹ä½æ•°ï¼šç¯å¢ƒæ¸©åº¦æ˜¾ç¤º1ä½å°æ•°ï¼Œçƒ˜çƒ¤è®¾å¤‡æ¸©åº¦æ˜¾ç¤ºæ•´æ•°
                const tempValue = equipment.type === "baking" ? 
                    formatNumber(equipment.temperature, 0) : 
                    formatNumber(equipment.temperature, 1);
                
                // è®¾å¤‡æ¹¿åº¦æ˜¾ç¤ºä¸ºæ•´æ•°ï¼ˆå»æ‰å°æ•°ï¼‰
                const humidityValue = Math.round(equipment.humidity);
                
                const equipmentItem = document.createElement('div');
                equipmentItem.className = `equipment-item ${equipment.status}`;
                equipmentItem.innerHTML = `
                    <div class="equipment-header">
                        <div class="equipment-name">${equipment.name}</div>
                        <div class="equipment-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="equipment-details">
                        <div class="equipment-detail">
                            <span class="detail-label">è®¾å¤‡æ¸©åº¦</span>
                            <span class="detail-value ${tempValueClass}">${tempValue} ${tempUnit}</span>
                        </div>
                        <div class="equipment-detail">
                            <span class="detail-label">è®¾å¤‡æ¹¿åº¦</span>
                            <span class="detail-value">${humidityValue} %RH</span>
                        </div>
                        <div class="equipment-detail">
                            <span class="detail-label">è¿è¡Œé€Ÿåº¦</span>
                            <span class="detail-value">${equipment.speed} ${equipment.type === "baking" ? "ç›˜/å°æ—¶" : "è½¬/åˆ†é’Ÿ"}</span>
                        </div>
                        <div class="equipment-detail">
                            <span class="detail-label">å®æ—¶åŠŸç‡</span>
                            <span class="detail-value">${formatNumber(equipment.power, 1)} kW</span>
                        </div>
                        <div class="equipment-detail">
                            <span class="detail-label">è¿è¡Œæ—¶é•¿</span>
                            <span class="detail-value">${formatNumber(equipment.runtime, 1)} å°æ—¶</span>
                        </div>
                    </div>
                `;
                equipmentGrid.appendChild(equipmentItem);
            });
        }
        
        // ç”Ÿæˆä¸‹ä¸ªè®¢å•å­—ç¬¦ä¸²
        function generateNextOrder(productCode) {
            const productNames = ["ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰", "èŠ‹æ³¥éº»è–¯é…¥", "è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰"];
            const randomProduct = productNames[Math.floor(Math.random() * productNames.length)];
            
            // ç”Ÿæˆéšæœºè®¢å•å·
            const date = new Date();
            const year = date.getFullYear();
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const day = date.getDate().toString().padStart(2, '0');
            const randomNum = Math.floor(Math.random() * 900) + 100; // 100-999ä¹‹é—´çš„éšæœºæ•°
            
            return `GD${year}${month}${day}${randomNum} ${randomProduct}`;
        }
        
        // æ¨¡æ‹Ÿæ•°æ®åˆ·æ–°ï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šæ˜¯Ajaxè¯·æ±‚ï¼‰
        function refreshData() {
            // å¦‚æœæ‰€æœ‰ç”Ÿäº§å·²å®Œæˆï¼Œåˆ™ä¸å†å¢åŠ äº§é‡
            if (productionCompleted) {
                // æ˜¾ç¤ºæç¤ºä¿¡æ¯
                const btn = document.querySelector('.control-btn');
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<span>âœ…</span> æ‰€æœ‰ç”Ÿäº§å·²å®Œæˆ';
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                }, 2000);
                return;
            }
            
            // éšæœºæ›´æ–°ä¸€äº›æ•°æ®ï¼Œæ¨¡æ‹Ÿå®æ—¶å˜åŒ–
            let hasChange = false;
            
            // æ›´æ–°ç”Ÿäº§æ•°æ®
            productionData.forEach(item => {
                if (item.status === "running" && item.producedQty < item.planQty) {
                    // æ ¹æ®ç”Ÿäº§é€Ÿç‡å› å­è®¡ç®—å¢é‡
                    const baseIncrement = Math.floor(Math.random() * 80) + 20;
                    const increment = Math.floor(baseIncrement * productionRate);
                    
                    // ç¡®ä¿ä¸ä¼šè¶…è¿‡è®¡åˆ’æ•°é‡
                    const newProducedQty = Math.min(item.planQty, item.producedQty + increment);
                    
                    // å¦‚æœæœ‰å˜åŒ–
                    if (newProducedQty > item.producedQty) {
                        item.producedQty = newProducedQty;
                        hasChange = true;
                        
                        // éšæœºè°ƒæ•´å°æ—¶äº§èƒ½
                        const baseOutput = item.productCode === "product1" ? 600 : 
                                         item.productCode === "product2" ? 500 : 400;
                        item.hourlyOutput = baseOutput + Math.floor(Math.random() * 150) - 50;
                    }
                    
                    // å¦‚æœå®Œæˆï¼Œæ›´æ–°çŠ¶æ€å¹¶ç”Ÿæˆæ–°çš„ä¸‹ä¸ªè®¢å•
                    if (item.producedQty >= item.planQty) {
                        item.status = "waiting";
                        item.hourlyOutput = 0;
                        // ä¸ºå·²å®Œæˆçš„ç”Ÿäº§çº¿ç”Ÿæˆæ–°çš„ä¸‹ä¸ªè®¢å•
                        item.nextOrder = generateNextOrder(item.productCode);
                        hasChange = true;
                    }
                }
            });
            
            // ä¸ºä¸€äº›ç­‰å¾…ä¸­çš„ç”Ÿäº§çº¿ä¹Ÿç”Ÿæˆæ–°çš„ä¸‹ä¸ªè®¢å•ï¼ˆ30%æ¦‚ç‡ï¼‰
            productionData.forEach(item => {
                if (item.status === "waiting" && Math.random() < 0.3) {
                    item.nextOrder = generateNextOrder(item.productCode);
                    hasChange = true;
                }
            });
            
            // æ›´æ–°è®¾å¤‡æ•°æ®
            equipmentData.forEach(equipment => {
                // æ ¹æ®è®¾å¤‡çŠ¶æ€æ›´æ–°å‚æ•°
                if (equipment.status === "running") {
                    // è¿è¡Œä¸­çš„è®¾å¤‡å‚æ•°ä¼šæœ‰å°èŒƒå›´æ³¢åŠ¨
                    if (equipment.type === "baking") {
                        // çƒ¤ç®±æ¸©åº¦æ³¢åŠ¨
                        equipment.temperature += (Math.random() - 0.5) * 5;
                        equipment.temperature = Math.max(160, Math.min(220, equipment.temperature));
                        
                        // æ£€æŸ¥æ¸©åº¦çŠ¶æ€
                        if (equipment.temperature > 200) {
                            equipment.temperatureStatus = "warning";
                        } else if (equipment.temperature > 210) {
                            equipment.temperatureStatus = "danger";
                        } else {
                            equipment.temperatureStatus = "normal";
                        }
                    } else {
                        // å…¶ä»–è®¾å¤‡æ¸©åº¦æ³¢åŠ¨
                        equipment.temperature += (Math.random() - 0.5) * 0.5;
                        equipment.temperature = Math.max(20, Math.min(35, equipment.temperature));
                        
                        if (equipment.temperature > 30) {
                            equipment.temperatureStatus = "warning";
                        } else {
                            equipment.temperatureStatus = "normal";
                        }
                    }
                    
                    // æ¹¿åº¦æ³¢åŠ¨
                    equipment.humidity += (Math.random() - 0.5) * 3;
                    equipment.humidity = Math.max(40, Math.min(70, equipment.humidity));
                    
                    // é€Ÿåº¦å°èŒƒå›´æ³¢åŠ¨
                    equipment.speed += (Math.random() - 0.5) * 5;
                    equipment.speed = Math.max(0, equipment.speed);
                    
                    // åŠŸç‡æ³¢åŠ¨
                    equipment.power += (Math.random() - 0.5) * 0.3;
                    equipment.power = Math.max(0, equipment.power);
                    
                    // è¿è¡Œæ—¶é—´å¢åŠ 
                    equipment.runtime += updateSpeed / 3600000; // æŒ‰æ›´æ–°é—´éš”å¢åŠ å°æ—¶æ•°
                    
                    hasChange = true;
                }
                
                // éšæœºæ”¹å˜è®¾å¤‡çŠ¶æ€ï¼ˆæ¨¡æ‹Ÿæ•…éšœ/æ¢å¤ï¼‰
                if (Math.random() > 0.95) { // 5%çš„æ¦‚ç‡æ”¹å˜çŠ¶æ€
                    const statuses = ["running", "waiting", "stopped"];
                    const currentStatus = equipment.status;
                    
                    let newStatus;
                    do {
                        newStatus = statuses[Math.floor(Math.random() * statuses.length)];
                    } while (newStatus === currentStatus);
                    
                    equipment.status = newStatus;
                    
                    // å¦‚æœè®¾å¤‡åœæ­¢ï¼Œé‡ç½®ä¸€äº›å‚æ•°
                    if (newStatus !== "running") {
                        equipment.speed = 0;
                        equipment.power = newStatus === "waiting" ? 0.5 : 0.2;
                    }
                    
                    hasChange = true;
                }
            });
            
            // æ›´æ–°ç¯å¢ƒæ•°æ®
            updateEnvironmentData();
            
            // å¦‚æœæœ‰å˜åŒ–ï¼Œé‡æ–°æ¸²æŸ“
            if (hasChange) {
                const productFilter = document.getElementById('productFilter').value;
                const lineFilter = document.getElementById('lineFilter').value;
                const equipmentFilter = document.getElementById('equipmentFilter').value;
                
                renderProductionTable(productFilter, lineFilter);
                renderEquipmentStatus(equipmentFilter);
            }
            
            // æ˜¾ç¤ºåˆ·æ–°æç¤º
            const btn = document.querySelector('.control-btn');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<span>âœ“</span> æ•°æ®å·²æ›´æ–°';
            setTimeout(() => {
                btn.innerHTML = originalHTML;
            }, 1500);
        }
        
        // é‡ç½®ç”Ÿäº§æ•°æ®
        function resetProductionData() {
            // é‡ç½®ç”Ÿäº§æ•°æ®åˆ°åˆå§‹çŠ¶æ€
            productionData = [
                {
                    line: "ç³•ç‚¹ä¸€çº¿-ç”²ç­",
                    orderNo: "GD20241122001",
                    product: "ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                    planQty: 5000,
                    producedQty: 1000 + Math.floor(Math.random() * 1000),
                    status: "running",
                    hourlyOutput: 600 + Math.floor(Math.random() * 100),
                    nextOrder: "GD20241123001 ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                    lineCode: "line1",
                    productCode: "product1"
                },
                {
                    line: "ç³•ç‚¹ä¸€çº¿-ä¹™ç­",
                    orderNo: "GD20241122002",
                    product: "ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                    planQty: 5000,
                    producedQty: 800 + Math.floor(Math.random() * 800),
                    status: "running",
                    hourlyOutput: 550 + Math.floor(Math.random() * 100),
                    nextOrder: "GD20241123002 èŠ‹æ³¥éº»è–¯é…¥",
                    lineCode: "line1",
                    productCode: "product1"
                },
                {
                    line: "ç³•ç‚¹äºŒçº¿-ç”²ç­",
                    orderNo: "GD20241122003",
                    product: "ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                    planQty: 6000,
                    producedQty: 3000 + Math.floor(Math.random() * 1000),
                    status: "running",
                    hourlyOutput: 650 + Math.floor(Math.random() * 100),
                    nextOrder: "GD20241123003 èŠ‹æ³¥éº»è–¯é…¥",
                    lineCode: "line2",
                    productCode: "product1"
                },
                {
                    line: "ç³•ç‚¹äºŒçº¿-ä¹™ç­",
                    orderNo: "GD20241122004",
                    product: "èŠ‹æ³¥éº»è–¯é…¥",
                    planQty: 4000,
                    producedQty: 1500 + Math.floor(Math.random() * 1000),
                    status: "running",
                    hourlyOutput: 450 + Math.floor(Math.random() * 100),
                    nextOrder: "GD20241123004 è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                    lineCode: "line2",
                    productCode: "product2"
                },
                {
                    line: "ç³•ç‚¹ä¸‰çº¿-ç”²ç­",
                    orderNo: "GD20241122005",
                    product: "èŠ‹æ³¥éº»è–¯é…¥",
                    planQty: 4000,
                    producedQty: 500 + Math.floor(Math.random() * 800),
                    status: "running",
                    hourlyOutput: 400 + Math.floor(Math.random() * 100),
                    nextOrder: "GD20241123005 ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                    lineCode: "line3",
                    productCode: "product2"
                },
                {
                    line: "ç³•ç‚¹ä¸‰çº¿-ä¹™ç­",
                    orderNo: "GD20241122006",
                    product: "èŠ‹æ³¥éº»è–¯é…¥",
                    planQty: 4000,
                    producedQty: 0,
                    status: "stopped",
                    hourlyOutput: 0,
                    nextOrder: "GD20241123006 èŠ‹æ³¥éº»è–¯é…¥",
                    lineCode: "line3",
                    productCode: "product2"
                },
                {
                    line: "ç³•ç‚¹å››çº¿-ç”²ç­",
                    orderNo: "GD20241122007",
                    product: "èŠ‹æ³¥éº»è–¯é…¥",
                    planQty: 4000,
                    producedQty: 3500 + Math.floor(Math.random() * 500),
                    status: "running",
                    hourlyOutput: 500 + Math.floor(Math.random() * 100),
                    nextOrder: "GD20241123007 ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                    lineCode: "line4",
                    productCode: "product2"
                },
                {
                    line: "ç³•ç‚¹å››çº¿-ä¹™ç­",
                    orderNo: "GD20241122008",
                    product: "è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                    planQty: 3000,
                    producedQty: 800 + Math.floor(Math.random() * 700),
                    status: "running",
                    hourlyOutput: 350 + Math.floor(Math.random() * 100),
                    nextOrder: "GD20241123008 èŠ‹æ³¥éº»è–¯é…¥",
                    lineCode: "line4",
                    productCode: "product3"
                },
                {
                    line: "ç³•ç‚¹äº”çº¿-ç”²ç­",
                    orderNo: "GD20241122009",
                    product: "è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                    planQty: 3000,
                    producedQty: 0,
                    status: "stopped",
                    hourlyOutput: 0,
                    nextOrder: "GD20241123009 è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                    lineCode: "line5",
                    productCode: "product3"
                },
                {
                    line: "ç³•ç‚¹äº”çº¿-ä¹™ç­",
                    orderNo: "GD20241122010",
                    product: "è‘¡è„å¥¶é…¥ï¼ˆåŸå‘³ï¼‰",
                    planQty: 3000,
                    producedQty: 0,
                    status: "stopped",
                    hourlyOutput: 0,
                    nextOrder: "GD20241123010 ç›’è£…ç™½çš®ï¼ˆæ¤°çš‡èŠå£«å‘³ï¼‰",
                    lineCode: "line5",
                    productCode: "product3"
                }
            ];
            
            // é‡ç½®è®¾å¤‡çŠ¶æ€
            equipmentData.forEach(equipment => {
                // éšæœºè®¾ç½®è®¾å¤‡çŠ¶æ€ï¼Œä½†å¤§éƒ¨åˆ†æ˜¯è¿è¡ŒçŠ¶æ€
                const rand = Math.random();
                if (rand < 0.7) {
                    equipment.status = "running";
                    
                    // é‡ç½®è¿è¡Œå‚æ•°
                    if (equipment.type === "baking") {
                        equipment.temperature = 180 + Math.random() * 20;
                        equipment.temperatureStatus = equipment.temperature > 200 ? "warning" : "normal";
                    } else {
                        equipment.temperature = 22 + Math.random() * 8;
                        equipment.temperatureStatus = equipment.temperature > 30 ? "warning" : "normal";
                    }
                    
                    equipment.humidity = 50 + Math.random() * 15;
                    equipment.speed = equipment.type === "baking" ? 40 + Math.random() * 10 : 
                                    equipment.type === "mixing" ? 100 + Math.random() * 30 :
                                    equipment.type === "forming" ? 80 + Math.random() * 20 :
                                    equipment.type === "cooling" ? 25 + Math.random() * 10 :
                                    100 + Math.random() * 30; // packaging
                    equipment.power = equipment.type === "baking" ? 10 + Math.random() * 3 :
                                    equipment.type === "mixing" ? 4 + Math.random() * 2 :
                                    3 + Math.random() * 2;
                } else if (rand < 0.9) {
                    equipment.status = "waiting";
                    equipment.speed = 0;
                    equipment.power = 0.5;
                } else {
                    equipment.status = "stopped";
                    equipment.speed = 0;
                    equipment.power = 0.2;
                }
                
                equipment.runtime = 4 + Math.random() * 6;
            });
            
            // é‡ç½®ç¯å¢ƒæ•°æ®
            environmentData = {
                workshopTemp: 24.0 + Math.random() * 2,
                workshopHumidity: 55 + Math.random() * 10,
                airQuality: "ä¼˜",
                pm25: 10 + Math.floor(Math.random() * 10),
                energyConsumption: 85 + Math.random() * 10,
                totalEnergyToday: 1200 + Math.random() * 200
            };
            
            // é‡æ–°æ¸²æŸ“
            const productFilter = document.getElementById('productFilter').value;
            const lineFilter = document.getElementById('lineFilter').value;
            const equipmentFilter = document.getElementById('equipmentFilter').value;
            
            renderProductionTable(productFilter, lineFilter);
            renderEquipmentStatus(equipmentFilter);
            updateEnvironmentData();
            
            // æ˜¾ç¤ºé‡ç½®æç¤º
            const btn = document.querySelector('.reset-btn');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<span>âœ…</span> æ•°æ®å·²é‡ç½®';
            setTimeout(() => {
                btn.innerHTML = originalHTML;
            }, 1500);
            
            productionCompleted = false;
        }
        
        // åˆ‡æ¢ç”Ÿäº§é€Ÿåº¦
        function toggleProductionSpeed() {
            isFastMode = !isFastMode;
            const btn = document.getElementById('speedToggleBtn');
            
            if (isFastMode) {
                productionRate = 5;
                btn.innerHTML = '<span>âš¡</span> æé€Ÿæ¨¡å¼';
                btn.style.backgroundColor = '#ff9800';
            } else {
                productionRate = 1;
                btn.innerHTML = '<span>âš¡</span> æ­£å¸¸æ¨¡å¼';
                btn.style.backgroundColor = '#1976d2';
            }
            
            // æ›´æ–°ä¸‹æ‹‰æ¡†æ˜¾ç¤º
            document.getElementById('productionRate').value = productionRate;
        }
        
        // æ”¹å˜æ›´æ–°é¢‘ç‡
        function changeUpdateSpeed() {
            const speed = parseInt(document.getElementById('updateSpeed').value);
            updateSpeed = speed;
            
            // æ¸…é™¤ç°æœ‰å®šæ—¶å™¨
            clearInterval(refreshInterval);
            
            // è®¾ç½®æ–°çš„å®šæ—¶å™¨
            refreshInterval = setInterval(refreshData, updateSpeed);
            
            // æ˜¾ç¤ºæç¤º
            const btn = document.querySelector('.control-btn');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = `<span>â±ï¸</span> æ›´æ–°é¢‘ç‡: ${speed/1000}ç§’`;
            setTimeout(() => {
                btn.innerHTML = originalHTML;
            }, 1500);
        }
        
        // æ”¹å˜ç”Ÿäº§é€Ÿç‡
        function changeProductionRate() {
            const rate = parseFloat(document.getElementById('productionRate').value);
            productionRate = rate;
            
            // æ ¹æ®é€Ÿç‡æ›´æ–°æŒ‰é’®çŠ¶æ€
            const btn = document.getElementById('speedToggleBtn');
            isFastMode = rate > 1;
            
            if (rate === 5) {
                btn.innerHTML = '<span>âš¡</span> æé€Ÿæ¨¡å¼';
                btn.style.backgroundColor = '#ff9800';
            } else if (rate === 2) {
                btn.innerHTML = '<span>âš¡</span> å¿«é€Ÿæ¨¡å¼';
                btn.style.backgroundColor = '#ff9800';
            } else if (rate === 0.5) {
                btn.innerHTML = '<span>ğŸŒ</span> æ…¢é€Ÿæ¨¡å¼';
                btn.style.backgroundColor = '#9c27b0';
            } else {
                btn.innerHTML = '<span>âš¡</span> æ­£å¸¸æ¨¡å¼';
                btn.style.backgroundColor = '#1976d2';
            }
        }
        
        // åˆ‡æ¢å…¨å±æ¨¡å¼
        function toggleFullscreen() {
            const body = document.body;
            const btn = document.getElementById('fullscreenBtn');
            
            if (!isFullscreen) {
                // è¿›å…¥å…¨å±
                if (body.requestFullscreen) {
                    body.requestFullscreen();
                } else if (body.mozRequestFullScreen) { // Firefox
                    body.mozRequestFullScreen();
                } else if (body.webkitRequestFullscreen) { // Chrome, Safari and Opera
                    body.webkitRequestFullscreen();
                } else if (body.msRequestFullscreen) { // IE/Edge
                    body.msRequestFullscreen();
                }
                
                body.classList.add('fullscreen');
                btn.classList.add('active');
                btn.innerHTML = '<span>â›¶</span> é€€å‡ºå…¨å±';
                isFullscreen = true;
            } else {
                // é€€å‡ºå…¨å±
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { // Firefox
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { // Chrome, Safari and Opera
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { // IE/Edge
                    document.msExitFullscreen();
                }
                
                body.classList.remove('fullscreen');
                btn.classList.remove('active');
                btn.innerHTML = '<span>â›¶</span> å…¨å±æ˜¾ç¤º';
                isFullscreen = false;
            }
        }
        
        // ç›‘å¬å…¨å±å˜åŒ–
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('mozfullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('msfullscreenchange', handleFullscreenChange);
        
        function handleFullscreenChange() {
            const body = document.body;
            const btn = document.getElementById('fullscreenBtn');
            
            // æ£€æŸ¥æ˜¯å¦åœ¨å…¨å±çŠ¶æ€
            const isFullscreenNow = !!(document.fullscreenElement || 
                                      document.mozFullScreenElement || 
                                      document.webkitFullscreenElement || 
                                      document.msFullscreenElement);
            
            if (isFullscreenNow) {
                body.classList.add('fullscreen');
                btn.classList.add('active');
                btn.innerHTML = '<span>â›¶</span> é€€å‡ºå…¨å±';
                isFullscreen = true;
            } else {
                body.classList.remove('fullscreen');
                btn.classList.remove('active');
                btn.innerHTML = '<span>â›¶</span> å…¨å±æ˜¾ç¤º';
                isFullscreen = false;
            }
        }
        
        // ç›‘å¬ESCé”®é€€å‡ºå…¨å±
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && isFullscreen) {
                toggleFullscreen();
            }
        });
        
        // åˆå§‹åŒ–å‡½æ•°
        function initDashboard() {
            updateCurrentTime();
            renderProductionTable();
            renderEquipmentStatus();
            updateEnvironmentData();
            
            // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯10ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡æ•°æ®
            refreshInterval = setInterval(refreshData, updateSpeed);
            
            // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ—¶é—´
            setInterval(updateCurrentTime, 60000);
            
            // ç»‘å®šç­›é€‰å™¨äº‹ä»¶
            document.getElementById('productFilter').addEventListener('change', function() {
                const productFilter = this.value;
                const lineFilter = document.getElementById('lineFilter').value;
                renderProductionTable(productFilter, lineFilter);
            });
            
            document.getElementById('lineFilter').addEventListener('change', function() {
                const lineFilter = this.value;
                const productFilter = document.getElementById('productFilter').value;
                renderProductionTable(productFilter, lineFilter);
            });
            
            document.getElementById('equipmentFilter').addEventListener('change', function() {
                const equipmentFilter = this.value;
                renderEquipmentStatus(equipmentFilter);
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
